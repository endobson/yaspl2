(module prim
  (types)
  (define (yprim_read_memory
            [address : (pointer int8)]
            [out-bytes : (pointer int8)]
            [amount : int64]) : int64
    (def out-memory (ptr-adjust int8 out-bytes 8))
    (def index 0)
    (while (< index amount)
      (ptr-set!
        (ptr-adjust int8 out-memory index)
        (ptr-ref (ptr-adjust int8 address index)))
      (set! index (+ index 1)))
    (return 0)))
