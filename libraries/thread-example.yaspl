(module thread-example
  (import
    (prim
      #:types (Array Bytes InputPort OutputPort Byte)
      #:values () 
      #:patterns ())
    (io write-line read-all-bytes)
    (mach spawn))
  (export)
  (types)


  (define (main [args : (Array Bytes)] [stdin : InputPort] [stdout : OutputPort] [stderr : OutputPort]) : Byte
    (begin
      (spawn
        (lambda ()
          (write-line #"Other-Thread" stdout)))
      (read-all-bytes stdin)
      0)))
