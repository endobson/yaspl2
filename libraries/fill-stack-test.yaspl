#:module (fill-stack-test)
#:import {
  (io)
  (list)
  (numbers)
  (prim)
}
(export)
(types)

(define (main [args : (Array Bytes)] [stdin : InputPort] [stdout : OutputPort] [stderr : OutputPort]) : Int
  (match-define buffer (make-array 4 0))
  (match-define fill-count (fill-stack buffer))
  (begin
    (write-all-bytes #"depth: " stdout)
    (write-line (integer->decimal-bytes fill-count) stdout)
    (for-each
      (lambda ([x : Int])
        (write-line (integer->hex-bytes x) stdout))
      (array->list buffer))
    0))
